<common-page-header></common-page-header>

<div class="container-fluid stage">
  <div class="row page-title with-tools">
    <h1>Job Details</h1>
  </div>

  <div class="container-fluid resource-detail tiles-view">
    <div class="resource-row">
      <div class="tile meta-tile half">
        <div class="tile-row icon-header-row">
          <div class="resource-icon icon icon-jobs icon-lg-md"></div>
          <h2>{{job.jobId}} {{job.status}}</h2>
        </div>
        <div class="tile-row resource-info">
          <div class="resource-data indent">
            <div class="label-value-container">
              <p class="label">Type</p>
              <p class="value">{{job.title.text}}</p>
            </div>
            <div class="label-value-container">
              <p class="label">User</p>
              <p class="value">{{job.user}}</p>
            </div>
            <div class="label-value-container">
              <p class="label">Start Time</p>
              <p class="value">{{job.startDate | date : "MMM d, y h:mm:ss a" }}</p>
            </div>
            <div class="label-value-container">
              <p class="label">End Time</p>
              <p class="value">{{job.endDate | date : "MMM d, y h:mm:ss a" }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="tile meta-tile half">
        <div class="tile-row icon-header-row">
          <div class="resource-icon icon icon-logs icon-lg-md"></div>
          <h2>Reports</h2>
        </div>
        <div class="tile-row tile-container list-view indent">

          <div class="tile row-tile column-headers">
            <div class="cell third">
              <p class="sort-column-header">Severity</p>
            </div>
            <div class="cell third">
              <p class="sort-column-header">Message</p>
            </div>
            <div class="cell third">
              <p class="sort-column-header">Date</p>
            </div>
          </div>

        </div>
        <div class="tile-row tile-container list-view indent scrollable">

          <div class="tile row-tile" ng-repeat="report in job.reports">
            <div class="cell third">
              <p>{{ report.severity }}</p>
            </div>
            <div class="cell third">
              <p title="{{report.reportMessage.text}}">{{ report.reportMessage.text }}</p>
            </div>
            <div class="cell third">
              <p>{{ report.creationDate | date : "MMM d, y h:mm:ss a" }}</p>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
  <div class="inventory tiles-view list-column">
    <!--<div class="resource-row">-->
    <!---->
    <!--</div>-->
    <div class="tile-container list-view">
      <div class="resource-row">
        <div class="tile half">
          <ol class="breadcrumb">
            <li><a ng-href="#/jobs" class="icon icon-md icon-jobs" title="Jobs"></a></li>
            <li data-ng-repeat="jobPath in path" style="max-width: 20em; overflow: hidden;text-overflow: ellipsis; white-space: nowrap">
              <a ng-href="#/jobs/{{jobPath.jobId}}" ng-if="!($last)" class="resource-icon icon" title="{{jobPath.title.text}}">{{jobPath.title.text}}</a>
              <span ng-if="$last" class="resource-icon icon" title="{{jobPath.title.text}}">{{jobPath.title.text}}</span>
            </li>
          </ol>
        </div>
      </div>


      <div class="panel-group tile-container list-view list-view-flex" aria-multiselectable="true" role="tablist">
        <div class="tile row row-tile column-headers">
          <div class="cell tenth">
            <span class="sort-column-header">STATUS</span>
          </div>

          <div class="cell quarter">
            <span class="sort-column-header">TITLE</span>
          </div>

          <div class="cell quarter">
            <span class="sort-column-header">USER</span>
          </div>

          <div class="cell fifth">
            <span class="sort-column-header">START</span>
          </div>

          <div class="cell fifth">
            <span class="sort-column-header">END</span>
          </div>
        </div>

        <div class="tile row-tile" data-ng-repeat="childJob in childJobs">
          <div class="cell tenth alert-cell">
            <div class="resource-icon icon job-status-{{ childJob.status.toLowerCase() }}"></div>
          </div>
          <div class="cell quarter control-cell" title="{{ childJob.title.text }}">
            <h2>
              <a class="include-icon jobs" ng-href="#/jobs/{{ childJob.jobId }}">{{ childJob.title.text }}</a>
            </h2>
          </div>
          <div class="cell quarter" title="{{ childJob.user }}">
            <p>{{ childJob.user }}</p>
          </div>
          <div class="cell fifth" title="{{ childJob.startDate | date : 'MMM d, y h:mm:ss a' }}">
            <p>{{ childJob.startDate | date : "MMM d, y h:mm:ss a" }}</p>
          </div>
          <div class="cell fifth" title="{{ childJob.endDate | date : 'MMM d, y h:mm:ss a' }}">
            <p>{{ childJob.endDate | date : "MMM d, y h:mm:ss a" }}</p>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
